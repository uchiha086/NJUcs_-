@startuml
actor 用户
participant 记账本App
participant 数据校验服务
participant 交易数据库
participant 统计服务
participant 图表生成服务
participant 查询服务

' 记账流程
用户 -> 记账本App: 打开App，点击“记一笔”
记账本App -> 记账本App: 展示记账表单
用户 -> 记账本App: 填写交易信息（金额、时间、分类、备注）并提交
记账本App -> 数据校验服务: 提交数据进行校验
alt 校验通过
    数据校验服务 -> 交易数据库: 存储交易记录
    交易数据库 --> 数据校验服务: 存储成功响应
    data校验服务 --> 记账本App: 校验通过，存储成功
    记账本App --> 用户: 提示“记账成功”
else 校验失败
    数据校验服务 --> 记账本App: 校验失败（如缺失必填项）
    记账本App --> 用户: 提示“请补全金额、时间或分类信息”
end

' 统计流程
用户 -> 记账本App: 点击“统计分析”，选择统计维度（如时间维度）
记账本App -> 统计服务: 请求按时间维度统计数据
统计服务 -> 交易数据库: 查询对应时间范围的交易数据
交易数据库 --> 统计服务: 返回交易数据
统计服务 -> 统计服务: 计算收支总额、结余等统计结果
统计服务 -> 图表生成服务: 请求生成统计图表（如柱状图）
图表生成服务 --> 统计服务: 返回生成的图表
统计服务 --> 记账本App: 返回统计结果和图表
记账本App --> 用户: 展示统计结果和图表

' 查询流程
用户 -> 记账本App: 点击“查找账单”，输入查询条件（如时间、分类）
记账本App -> 查询服务: 请求按条件查询交易记录
查询服务 -> 交易数据库: 执行多条件查询
交易数据库 --> 查询服务: 返回匹配的交易记录
查询服务 -> 查询服务: 对查询结果按时间倒序排序
查询服务 --> 记账本App: 返回排序后的交易列表
记账本App --> 用户: 展示查询到的交易列表
@enduml